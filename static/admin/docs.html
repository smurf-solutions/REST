<!DOCTYPE html>
<html>
	<head>
		<title>Doc</title>
		<link rel="shortcut icon" type="image/png" href="favicon.png" />
		<link rel="stylesheet" href="style.css" />
		<style>
			body { padding:10px;}
		</style>
	</head>
	<body>
<h1> Smurf's DATABASE API</h1>

<h2>URL</h2>
<pre>
	/:db/:col:/:func ? [{param_N} & [{$set:__FORM_DATA__} ... ]] [& Query]
	
	/admin/:db/:func 
	/admin/:func
</pre>

<h2>Query</h2>
<pre>
	callback = functionWrapperOfResult
		Returns: functionWrapperOfResult(...)
	
	redirect = url/of/page?__RESULT_DATA__
		Returns: ...
	
	return = url/of/file/containing/model.ext
		Returns: ... __RESULT_DATA__ ...
	
	download[=fileName.ext]
		Downloadable file wit result
		
</pre>
	
<h2>Functions</h2>
<h3>Collection Functions and User Rights</h3>
<pre>
* Relate only for collection - /:db/:col:/:functionName?[{params1}&[{params2} ... ]] [& Query]

	find:
		<a>find</a>
		<a>findOne</a>
		<a>aggregate</a>
		<a>count</a>
		<a>disting</a>
		<a>geoHaystackSearch</a>
		<a>geoNear</a>
		<a>isCaped</a>	
			+ --- 
		<a>findOneAndDelete</a>
		<a>findOneAndReplace</a>
		<a>findOneAndUpdate</a>
		findOneAndDuplicate

	update:
		<a>replaceOne</a>
		<a>updateOne</a>
		<a>updateMany</a>
			+ --- find
		<a>findOneAndReplace</a>
		<a>findOneAndUpdate</a>
		
	insert:
		<a>insertOne</a>
		<a>insertMany</a>
		<a>updateOne</a> {upsert:1}
		<a>updateMany</a> {upsert:1}
			+ --- find
		<a>findOneAndReplace</a> {upsert:1}
		<a>findOneAndUpdate</a> {upsert:1}
		findOneAndDuplicate
	
	delete:
		<a>deleteOne </a>
		<a>deleteMany</a>
			+ --- find
		<a>findOneAndDelete</a>
</pre>

<h3>ADMIN's  functions </h3>
<pre>
* There are two groups - for collections and for database

1.For collection - /admin/:db/:col/
	stats
	// options - not implemented
	// indexes - not implemented

	// rename
	// drop 
	// dropIndex 
	// dropIndexes
	// createIndex
	// createIndexes 

2.For database - /admin/:db/
	listCollections	
	renameCollection
	createCollection    // or just create Document
	dropCollection
	dropDatabase        // to create DB just create Collection or Document
	stats
	command
	ping
	indexInformation
	addUser
	removeUser
</pre>

<h3>Super ADMIN's functions</h3>
<pre>
* Thees are params of db.admin() - /admin/:func
 
	buildInfo
	command
	listDatabases
	logout
	ping
	serverStatus
	// setProfilingLevel
	validateCollection
</pre>


<h2>Examples: </h2>
<pre>
	POST Files:
	< form action="/${db}/${collection}/insert">
		 < input title="Select a file to upload" type="file" [multiple] name="_FILE_DIRECTORY_">
		[< input title="Override file name if need" name="_id" value="_NEW_FILE_NAME_.ext">]
		 < input type="submit">
	< /form>
</pre>


<script>
	[].forEach.call(document.querySelectorAll("a"), function(anchor){
		if(!anchor.href){
			anchor.href = "http://mongodb.github.io/node-mongodb-native/2.2/api/Collection.html#"+anchor.textContent
		}
	})
</script>
		
		<hr>
		<footer style="text-align:center">
			Links: &nbsp;| &nbsp; 
			<a href="http://expressjs.com/en/guide/routing.html">Express Routing</a>
			&nbsp; | &nbsp;
			<a href="https://www.toptal.com/designers/htmlarrows/">HTML symbols</a>
			&nbsp; | &nbsp;
			<a href="https://www.w3schools.com/howto/">JS Tutorial</a>
			&nbsp; | &nbsp;
			<a href="http://mongodb.github.io/node-mongodb-native/2.2/api/">Driver API</a>
		</footer>
		<br>
		<link rel="stylesheet" href="app-menu.css">
		<script src="app-menu.js"></script>
	</body>
</html>